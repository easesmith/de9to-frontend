import{r as j,b3 as A,a as k,aa as L,c as O,b4 as q,_ as Y,j as e,e as G,f as n,g as i,ar as N,h as c,i as r,k as x,l as o,a4 as T,b5 as U,S as b,o as v,p as E,q as w,t as p,B as y,m as _,b6 as $,x as z,b7 as H}from"./index-C-yvlQ-I.js";import{P as J}from"./ProfileLayout-D44GQXX0.js";import{P as K,a as Q,b as W,C as X}from"./popover-C8Oie7VH.js";import{f as Z}from"./format-CW0G_LzU.js";import"./Header-BwvlhJEq.js";import"./de9to-logo-1-bqG7ETxb.js";import"./addDays-BmrnjbS8.js";const oe=()=>{const[u,I]=j.useState(!1),{res:m,fetchData:C,isLoading:R}=A(),{res:d,fetchData:P,isLoading:ee}=k(),h=L("userInfo"),a=O({resolver:z(H),defaultValues:{name:"",profileImg:"",profileImgPreview:"",mobile:"",email:"",gender:"",dateOfBirth:"",address:"",area:"",city:"",state:"",country:"",pincode:""}}),{reset:se,handleSubmit:F,getValues:D,watch:f,register:B,setValue:t}=a;console.log("getValues",D());const S=B("profileImg"),g=f("profileImg");j.useEffect(()=>{q(g,"profileImgPreview",t)},[a,g,t]);const M=s=>{console.log("Data:",s);const l=new FormData;l.append("profileImage",s.profileImg),l.append("name",s.name),l.append("email",s.email),l.append("pincode",s.pincode),l.append("city",s.city),l.append("state",s.state),l.append("gender",s.gender),l.append("mobile",s.mobile),l.append("address",s.address),l.append("area",s.area),l.append("dob",s.dateOfBirth),l.append("country",s.country),l.append("patientId",h==null?void 0:h.userId),C("/patient/update-patient",l)};j.useEffect(()=>{((m==null?void 0:m.status)===200||(m==null?void 0:m.status)===201)&&(console.log("patient profile res",m),Y.success("Patient profile updated successfully"))},[m]);const V=()=>{P(`/patient/get-patient-details?patientId=${h==null?void 0:h.userId}`)};return j.useEffect(()=>{V()},[]),j.useEffect(()=>{if((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201){console.log("patient profile get res",d);const{foundPatient:s}=d==null?void 0:d.data;t("name",s.name),t("profileImgPreview",(s==null?void 0:s.profileImage)&&s.profileImage),t("mobile",s.phone),t("email",s.email),t("gender",s.gender),t("dateOfBirth",s!=null&&s.dob?new Date(s==null?void 0:s.dob):new Date),t("address",s.address),t("area",s.area),t("city",s.city),t("state",s.state),t("country",s.country),t("pincode",s.pincode)}},[d]),e.jsx(J,{children:e.jsxs("div",{children:[e.jsx("h1",{className:"font-inter text-2xl font-medium text-[#00214B]",children:"Your Profile"}),e.jsx("div",{children:e.jsx(G,{...a,children:e.jsx("form",{onSubmit:F(M),className:"flex flex-col items-start gap-4 w-full mt-5",children:e.jsxs("div",{className:"flex flex-col gap-5 w-full h-full",children:[e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full h-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"profileImg",render:({field:s})=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"w-[100px]  h-[100px] rounded-full flex justify-center items-center overflow-hidden bg-white",children:f("profileImgPreview")?e.jsx("img",{src:f("profileImgPreview"),alt:"profileImg"}):e.jsx(N,{className:"text-6xl text-[#717171]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm w-40 text-[#717171] font-inter",children:"Browse your profile photo from your device"}),e.jsx(c,{className:"rounded-[6px] cursor-pointer border-[1px] border-[#95C22B] h-7 w-20 px-2 flex items-center justify-center mt-3 gap-[6px] bg-white",children:e.jsx("span",{className:"text-[#95C22B] text-xs font-medium font-inter",children:"Add Photo"})})]})]}),e.jsx(r,{children:e.jsx(x,{type:"file",className:"placeholder:text-[#717171] hidden h-12 border-[#E4E6EE]",...S})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(c,{className:"font-inter text-base text-[#717171] font-normal",children:["Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#717171]"}),e.jsx(x,{placeholder:"Full Name",className:"placeholder:text-[#717171] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(o,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs(c,{className:"font-inter text-base text-[#717171] font-normal",children:["Mobile",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>I(!0),className:"rounded-[6px] border-[1px] border-[#95C22B] h-6 px-2 flex items-center gap-[6px]",children:e.jsx("span",{className:"text-[#95C22B] text-xs font-medium font-inter",children:"Edit"})})]}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:`absolute z-10 left-3 top-1/2 -translate-y-1/2 ${u?"text-[#717171]":"text-white"}`}),e.jsx(x,{disabled:!u,type:"number",placeholder:"Enter Your Mobile Number",className:"placeholder:text-[#FFFFFF] disabled:text-white text-black disabled:bg-[#717171B2] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx("div",{className:"flex justify-between items-center w-full",children:e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Email"})}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#717171]"}),e.jsx(x,{type:"email",placeholder:"Enter Your Email",className:"placeholder:text-[#717171] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"gender",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Gender"}),e.jsx(r,{children:e.jsxs(b,{value:s.value,onValueChange:s.onChange,children:[e.jsx(v,{className:"w-full h-12 text-[#717171]",children:e.jsx(E,{placeholder:"Select an option"})}),e.jsxs(w,{className:"text-[#717171]",children:[e.jsx(p,{value:"male",children:"Male"}),e.jsx(p,{value:"female",children:"Female"}),e.jsx(p,{value:"other",children:"Other"})]})]})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"dateOfBirth",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Date of Birth"}),e.jsx(r,{children:e.jsxs(K,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(r,{children:e.jsxs(y,{variant:"outline",className:_("w-full h-12 flex gap-2 justify-start text-[#717171]",!s.value&&"text-muted-foreground"),children:[e.jsx($,{className:"text-[#717171]"}),s.value?Z(s.value,"PPP"):e.jsx("span",{children:"Pick a date"})]})})}),e.jsx(W,{className:"w-auto p-0",align:"start",children:e.jsx(X,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:l=>l>new Date||l<new Date("1900-01-01"),initialFocus:!0})})]})}),e.jsx(o,{})]})})})]}),e.jsx("h2",{className:"text-xl font-inter font-medium text-[#0D0E0E] mt-5",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Address"}),e.jsx(r,{children:e.jsx(x,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"area",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Area"}),e.jsx(r,{children:e.jsx(x,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"city",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"City"}),e.jsx(r,{children:e.jsx(x,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(o,{})]})})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"state",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"State"}),e.jsx(r,{children:e.jsx(x,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"country",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Country"}),e.jsx(r,{children:e.jsxs(b,{value:s.value,onValueChange:s.onChange,children:[e.jsx(v,{className:"w-full h-12 text-[#717171]",children:e.jsx(E,{placeholder:"India"})}),e.jsx(w,{className:"text-[#717171]",children:e.jsx(p,{value:"India",children:"India"})})]})}),e.jsx(o,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:a.control,name:"pincode",render:({field:s})=>e.jsxs(i,{children:[e.jsx(c,{className:"font-inter text-base text-[#717171] font-normal",children:"Pincode"}),e.jsx(r,{children:e.jsx(x,{type:"number",placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(o,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5 mt-4",children:[e.jsx("div",{}),e.jsx("div",{className:"max-[900px]:hidden"}),e.jsx(y,{type:"submit",className:"bg-[#95C22B] flex justify-center w-full h-12",children:"Save changes"})]})]})})})})]})})};export{oe as default};
