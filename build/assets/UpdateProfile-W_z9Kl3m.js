import{r as j,u as L,l as V,_ as O,j as e,B as v,c as k}from"./index-DmouPCTn.js";import{P as U}from"./ProfileLayout-UcBpfbwo.js";import{u as Y,F as q,b as n,c as i,d as o,e as r,I as m,f as c,l as G,E as R,P as T}from"./usePostApiReq-Bc5-sulw.js";import{S as E,a as w,b as y,c as I,e as u}from"./select-CbMVavr5.js";import{t as _}from"./zod-CUky7xw4.js";import{i as P,s as $}from"./index-Cm1U8_ys.js";import{P as z,a as H,b as J,C as K}from"./popover-BdWEKV8w.js";import{u as Q}from"./usePatchApiReq-CDyIi-kF.js";import{f as W}from"./format-CW0G_LzU.js";import"./Header-BT9ardL7.js";import"./de9to-logo-qc7xun2b6cqji9b2etrrmn9ecu7aif9fr5oesz8pp6-1.png-Dqa2L2LM.js";import"./index-BsLRKhMX.js";import"./addDays-BmrnjbS8.js";const X=(h,g,x)=>{if(h&&h.length>0){const f=new FileReader;f.readAsDataURL(h[0]),f.addEventListener("load",function(){x(g,this.result)})}},je=()=>{const[h,g]=j.useState(!1),{res:x,fetchData:f,isLoading:Z}=Q(),{res:d,fetchData:C,isLoading:ee}=L(),p=V("userInfo"),l=Y({resolver:_(T),defaultValues:{name:"",profileImg:"",profileImgPreview:"",mobile:"",email:"",gender:"",dateOfBirth:"",address:"",area:"",city:"",state:"",country:"",pincode:""}}),{reset:se,handleSubmit:F,getValues:D,watch:N,register:B,setValue:a}=l;console.log("getValues",D());const S=B("profileImg"),b=N("profileImg");j.useEffect(()=>{X(b,"profileImgPreview",a)},[l,b,a]);const M=s=>{console.log("Data:",s);const t=new FormData;t.append("profileImage",s.profileImg),t.append("name",s.name),t.append("email",s.email),t.append("pincode",s.pincode),t.append("city",s.city),t.append("state",s.state),t.append("gender",s.gender),t.append("mobile",s.mobile),t.append("address",s.address),t.append("area",s.area),t.append("dob",s.dateOfBirth),t.append("country",s.country),t.append("patientId",p==null?void 0:p.userId),f("/patient/update-patient",t)};j.useEffect(()=>{((x==null?void 0:x.status)===200||(x==null?void 0:x.status)===201)&&(console.log("patient profile res",x),O.success("Patient profile updated successfully"))},[x]);const A=()=>{C(`/patient/get-patient-details?patientId=${p==null?void 0:p.userId}`)};return j.useEffect(()=>{A()},[]),j.useEffect(()=>{if((d==null?void 0:d.status)===200||(d==null?void 0:d.status)===201){console.log("patient profile get res",d);const{foundPatient:s}=d==null?void 0:d.data;a("name",s.name),a("profileImgPreview",(s==null?void 0:s.profileImage)&&s.profileImage),a("mobile",s.phone),a("email",s.email),a("gender",s.gender),a("dateOfBirth",s!=null&&s.dob?new Date(s==null?void 0:s.dob):new Date),a("address",s.address),a("area",s.area),a("city",s.city),a("state",s.state),a("country",s.country),a("pincode",s.pincode)}},[d]),e.jsx(U,{children:e.jsxs("div",{children:[e.jsx("h1",{className:"font-inter text-2xl font-medium text-[#00214B]",children:"Your Profile"}),e.jsx("div",{children:e.jsx(q,{...l,children:e.jsx("form",{onSubmit:F(M),className:"flex flex-col items-start gap-4 w-full mt-5",children:e.jsxs("div",{className:"flex flex-col gap-5 w-full h-full",children:[e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full h-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"profileImg",render:({field:s})=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{className:"w-[100px]  h-[100px] rounded-full flex justify-center items-center overflow-hidden bg-white",children:N("profileImgPreview")?e.jsx("img",{src:N("profileImgPreview"),alt:"profileImg"}):e.jsx(P,{className:"text-6xl text-[#717171]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm w-40 text-[#717171] font-inter",children:"Browse your profile photo from your device"}),e.jsx(o,{className:"rounded-[6px] cursor-pointer border-[1px] border-[#95C22B] h-7 w-20 px-2 flex items-center justify-center mt-3 gap-[6px] bg-white",children:e.jsx("span",{className:"text-[#95C22B] text-xs font-medium font-inter",children:"Add Photo"})})]})]}),e.jsx(r,{children:e.jsx(m,{type:"file",className:"placeholder:text-[#717171] hidden h-12 border-[#E4E6EE]",...S})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"name",render:({field:s})=>e.jsxs(i,{children:[e.jsxs(o,{className:"font-inter text-base text-[#717171] font-normal",children:["Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#717171]"}),e.jsx(m,{placeholder:"Full Name",className:"placeholder:text-[#717171] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(c,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"mobile",render:({field:s})=>e.jsxs(i,{children:[e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsxs(o,{className:"font-inter text-base text-[#717171] font-normal",children:["Mobile",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>g(!0),className:"rounded-[6px] border-[1px] border-[#95C22B] h-6 px-2 flex items-center gap-[6px]",children:e.jsx("span",{className:"text-[#95C22B] text-xs font-medium font-inter",children:"Edit"})})]}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:`absolute z-10 left-3 top-1/2 -translate-y-1/2 ${h?"text-[#717171]":"text-white"}`}),e.jsx(m,{disabled:!h,type:"number",placeholder:"Enter Your Mobile Number",className:"placeholder:text-[#FFFFFF] disabled:text-white text-black disabled:bg-[#717171B2] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx("div",{className:"flex justify-between items-center w-full",children:e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Email"})}),e.jsx(r,{children:e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-[#717171]"}),e.jsx(m,{type:"email",placeholder:"Enter Your Email",className:"placeholder:text-[#717171] pl-10 h-12 border-[#E4E6EE]",...s})]})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"gender",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Gender"}),e.jsx(r,{children:e.jsxs(E,{value:s.value,onValueChange:s.onChange,children:[e.jsx(w,{className:"w-full h-12 text-[#717171]",children:e.jsx(y,{placeholder:"Select an option"})}),e.jsxs(I,{className:"text-[#717171]",children:[e.jsx(u,{value:"male",children:"Male"}),e.jsx(u,{value:"female",children:"Female"}),e.jsx(u,{value:"other",children:"Other"})]})]})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"dateOfBirth",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Date of Birth"}),e.jsx(r,{children:e.jsxs(z,{children:[e.jsx(H,{asChild:!0,children:e.jsx(r,{children:e.jsxs(v,{variant:"outline",className:k("w-full h-12 flex gap-2 justify-start text-[#717171]",!s.value&&"text-muted-foreground"),children:[e.jsx($,{className:"text-[#717171]"}),s.value?W(s.value,"PPP"):e.jsx("span",{children:"Pick a date"})]})})}),e.jsx(J,{className:"w-auto p-0",align:"start",children:e.jsx(K,{mode:"single",selected:s.value,onSelect:s.onChange,disabled:t=>t>new Date||t<new Date("1900-01-01"),initialFocus:!0})})]})}),e.jsx(c,{})]})})})]}),e.jsx("h2",{className:"text-xl font-inter font-medium text-[#0D0E0E] mt-5",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"address",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Address"}),e.jsx(r,{children:e.jsx(m,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"area",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Area"}),e.jsx(r,{children:e.jsx(m,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"city",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"City"}),e.jsx(r,{children:e.jsx(m,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(c,{})]})})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5",children:[e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"state",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"State"}),e.jsx(r,{children:e.jsx(m,{placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"country",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Country"}),e.jsx(r,{children:e.jsxs(E,{value:s.value,onValueChange:s.onChange,children:[e.jsx(w,{className:"w-full h-12 text-[#717171]",children:e.jsx(y,{placeholder:"India"})}),e.jsx(I,{className:"text-[#717171]",children:e.jsx(u,{value:"India",children:"India"})})]})}),e.jsx(c,{})]})})}),e.jsx("div",{className:"",children:e.jsx(n,{control:l.control,name:"pincode",render:({field:s})=>e.jsxs(i,{children:[e.jsx(o,{className:"font-inter text-base text-[#717171] font-normal",children:"Pincode"}),e.jsx(r,{children:e.jsx(m,{type:"number",placeholder:"Enter Details",className:"placeholder:text-[#717171] h-12 border-[#E4E6EE]",...s})}),e.jsx(c,{})]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 max-[900px]:grid-cols-2 max-sm:grid-cols-1 w-full gap-5 mt-4",children:[e.jsx("div",{}),e.jsx("div",{className:"max-[900px]:hidden"}),e.jsx(v,{type:"submit",className:"bg-[#95C22B] flex justify-center w-full h-12",children:"Save changes"})]})]})})})})]})})};export{je as default};
